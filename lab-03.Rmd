---
title: "Lab 03 - Nobel laureates"
author: "John T. Bennett"
date: "Feb. 10, 2022"
output: github_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse) 
```

```{r load-data, message=FALSE}
nobel <- read_csv("data/nobel.csv")
```

## Exercises

### Exercise 1

There are 935 observations in the dataset. The number of variables in the dataset is 26. Each row represents one Nobel laureate. 


```{r viewdata}
View(nobel)
```

### Exercise 2

2.1 Create dataframe
    Create a new data frame called nobel_living that filters for:
    -laureates for whom country is available
    -laureates who are people as opposed to organizations (organizations are denoted with "org" as their gender)
    -laureates who are still alive (their died_date is NA)

     Confirm that once you have filtered for these characteristics you are left with a data frame with 228 observations, once again using inline code.
     
     **JTB Note: In order to see the actual 228x26 tibble, I've entered the code without the dataframe command (myDataframe <-) immediately below. Then, below that, I've entered the code with the dataframe command. 

```{r newdataframe1}
nobel %>%
  filter(!is.na(country),
  gender != "org",
  is.na(died_date))
```

```{r newdataframe2}
nobel_living <- nobel %>%
  filter(!is.na(country),
  gender != "org",
  is.na(died_date))
```

2.2 Mutate- 

```{r NobelMutate}
nobel_living <- nobel_living %>%
  mutate(
    country_us = if_else(country == "USA", "USA", "Other")
  )
```

2.3 Mutate- Physics, Medicine, Chemistry, and Economics.

```{r NobelMutate}
nobel_living_science <- nobel_living %>%
  filter(category %in% c("Physics", "Medicine", "Chemistry", "Economics"))
```

### Exercise 3

***Note: This exercise proved to be extremely difficult. 

Faceted bar plot visualizing the relationship between the category of prize and whether the laureate was in the US when they won the nobel prize.

Interpret your visualization, and say a few words about whether the Buzzfeed headline is supported by the data.

    Your visualization should be faceted by category.
    For each facet you should have two bars, one for winners in the US and one for Other.
    Flip the coordinates so the bars are horizontal, not vertical.

```{r FacetedBarPlot}
ggplot(nobel, aes(x = nobel_living_science, fill = country)) +
 geom_histogram(binwidth = 5000) +
 labs(
   x = "-Living Nobel",
   y = "Frequency",
   title = "Faceted bar plot"
 ) +
 facet_wrap(~ country, nrow = 2)
```

### Exercise 4

***Note: This code did not produce any error messages, but it also did not produce any result that I could see.  

Create a new variable called born_country_us that has the value "USA" if the laureate is born in the US, and "Other" otherwise. How many of the winners are born in the US?

```{r born_country_us}
nobel_living_science <- nobel_living_science %>%
  mutate(
    born_country_us = if_else(country == "USA", "USA", "Other")
  )
```

### Exercise 5

***Note: I could not complete Exercise 3 due to the complexity.

Add a second variable to your visualization from Exercise 3 based on whether the laureate was born in the US or not. Based on your visualization, do the data appear to support Buzzfeedâ€™s claim? Explain your reasoning in 1-2 sentences.

    Your final visualization should contain a facet for each category.
    Within each facet, there should be a bar for whether the laureate won the award in the US or not.
    Each bar should have segments for whether the laureate was born in the US or not.


### Exercise 6

In a single pipeline, filter for laureates who won their prize in the US, but were born outside of the US, and then create a frequency table (with the count() function) for their birth country (born_country) and arrange the resulting data frame in descending order of number of observations for each country. Which country is the most common?

```{r count_and_desc_order}
nobel_living_science %>%
  count(born_country_us)
  arrange(desc(born_country_us))
```
 

